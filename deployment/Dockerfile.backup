FROM percona/percona-xtrabackup:8.0

USER 0

RUN microdnf install -y \
      bash \
      cronie \
      awscli \
      ca-certificates \
      tzdata \
      tar \
    && microdnf clean all

WORKDIR /scripts
COPY scripts/backup/ /scripts/
RUN chmod +x /scripts/*.sh \
    && mkdir -p /var/log \
    && touch /var/log/full_backup.log /var/log/inc_backup.log

ENTRYPOINT ["/bin/bash", "/scripts/entrypoint.sh"]
